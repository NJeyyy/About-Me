function sleep(a) {
  return new Promise(resolve => setTimeout(resolve, a))
}

function waitFor(a) {
  const poll = resolve => {
    if(a()) resolve();
    else setTimeout(_ => poll(resolve), 400)
  }
  return new Promise(poll)
}

function evil(a) {
  return new Function('return ' + a)()
}

function copyToClipboard(a) {
  const elem = document.createElement('textarea');
  elem.value = a;
  document.body.appendChild(elem);
  elem.select();
  document.execCommand('copy');
  document.body.removeChild(elem)
}

function SE(a) {
  if(document.querySelectorAll(a).length === 0) {
    return null
  }
  return document.querySelectorAll(a)
}

function ISE(a) {
  return document.querySelector(a)
}

function pickTextColorBasedOnBgColorSimple(a, c, d) {
  var e = (a.charAt(0) === '#') ? a.substring(1, 7) : a;
  var r = parseInt(e.substring(0, 2), 16);
  var g = parseInt(e.substring(2, 4), 16);
  var b = parseInt(e.substring(4, 6), 16);
  return (((r * 0.299) + (g * 0.587) + (b * 0.114)) > 186) ? d : c
}

function escapeRegex(a) {
  return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')
}
